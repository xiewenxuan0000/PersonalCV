{"ast":null,"code":"/*!\n* RAFManager v0.1.0\n*\n* Copyright 2018-2018, ajiemath <ajiemath@gmail.com>\n* Licensed under the MIT license\n* http://www.opensource.org/licenses/mit-license\n*\n*/\n!function (t, i) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = i() : \"function\" == typeof define && define.amd ? define(i) : t.RAFManager = i();\n}(this, function () {\n  \"use strict\";\n\n  return function () {\n    for (var t = [\"ms\", \"moz\", \"webkit\", \"o\"], i = 0; i < t.length && !window.requestAnimationFrame; ++i) window.requestAnimationFrame = window[t[i] + \"RequestAnimationFrame\"], window.cancelAnimationFrame = window[t[i] + \"CancelAnimationFrame\"] || window[t[i] + \"CancelRequestAnimationFrame\"];\n  }(), {\n    timer: 0,\n    state: \"stop\",\n    animations: [],\n    add: function (t) {\n      var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 60,\n        n = {\n          callback: t,\n          fps: i,\n          n: 60 / i,\n          param: arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null,\n          i: 0\n        };\n      return this.animations.push(n), this.animations.length >= 1 && this.start(), this;\n    },\n    getIndex: function (t) {\n      for (var i = 0; i < this.animations.length; i++) {\n        if (this.animations[i].callback === t) return i;\n      }\n      return -1;\n    },\n    remove: function (t) {\n      if (!(this.getIndex(t) < 0)) return this.deleteMap(t), 0 === this.animations.length && this.stop(), this;\n    },\n    deleteMap: function (t) {\n      var i = this.getIndex(t),\n        n = this.animations[i];\n      for (var e in n) delete n[e];\n      this.animations.splice(i, 1);\n    },\n    start: function () {\n      if (\"start\" !== this.state) return this.state = \"start\", this.tick(), this;\n    },\n    stop: function () {\n      if (\"stop\" !== this.state) return this.state = \"stop\", cancelAnimationFrame(this.timer), this;\n    },\n    tick: function () {\n      var t = this;\n      this.timer = requestAnimationFrame(function () {\n        t.tick();\n      });\n      for (var i = 0; i < this.animations.length; i++) {\n        var n = this.animations[i],\n          e = n.callback,\n          a = n.param;\n        n.i++, n.i >= n.n && (e(a), n.i = 0);\n      }\n    }\n  };\n});","map":{"version":3,"sources":["../src/RAFManager.js"],"names":["vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","callback","fps","aniData","n","param","i","animations","push","this","start","getIndex","deleteMap","stop","index","key","splice","state","tick","timer"],"mappings":";;;;;;;;;;;;;SAoBC,YAAA;IAAA,KAAA,IAEIA,CAAAA,GAAAA,CAAW,IAAA,EAAM,KAAA,EAAO,QAAA,EAAU,GAAA,CAAA,EAC7BC,CAAAA,GAAI,CAAA,EAAGA,CAAAA,GAAID,CAAAA,CAAQE,MAAAA,IAAAA,CAAWC,MAAAA,CAAOC,qBAAAA,EAAAA,EAAyBH,CAAAA,EAAAA,MAAAA,CAC/DG,qBAAAA,GAAwBD,MAAAA,CAAOH,CAAAA,CAAQC,CAAAA,CAAAA,GAAK,uBAAA,CAAA,EAAA,MAAA,CAC5CI,oBAAAA,GAAuBF,MAAAA,CAAOH,CAAAA,CAAQC,CAAAA,CAAAA,GAAK,sBAAA,CAAA,IAC9CE,MAAAA,CAAOH,CAAAA,CAAQC,CAAAA,CAAAA,GAAK,6BAAA,CAAA;EAAA,CANzB,EAAA,EAAA;IAAA,KAAA,EAWO,CAAA;IAAA,KAAA,EACA,MAAA;IAAA,UAAA,EAAA,EAAA;IAAA,GAAA,EAAA,UAGHK,CAAAA,EAAAA;MAAAA,IAAUC,CAAAA,GAAAA,SAAAA,CAAAA,MAAAA,GAAAA,CAAAA,IAAAA,KAAAA,CAAAA,KAAAA,SAAAA,CAAAA,CAAAA,CAAAA,GAAAA,SAAAA,CAAAA,CAAAA,CAAAA,GAAM,EAAA;QAEbC,CAAAA,GAAAA;UAAYF,QAAAA,EAAAA,CAAAA;UAAUC,GAAAA,EAAAA,CAAAA;UAAKE,CAAAA,EADvB,EAAA,GAAKF,CAAAA;UACqBG,KAAAA,EAAAA,SAAAA,CAAAA,MAAAA,GAAAA,CAAAA,IAAAA,KAAAA,CAAAA,KAAAA,SAAAA,CAAAA,CAAAA,CAAAA,GAAAA,SAAAA,CAAAA,CAAAA,CAAAA,GAFL,IAAA;UAEYC,CAAAA,EAAG;QAAA,CAAA;MAAA,OAAA,IAAA,CACzCC,UAAAA,CAAWC,IAAAA,CAAKL,CAAAA,CAAAA,EACjBM,IAAAA,CAAKF,UAAAA,CAAWV,MAAAA,IAAU,CAAA,IAAGY,IAAAA,CAAKC,KAAAA,EAAAA,EAE/BD,IAAAA;IAAAA,CAAAA;IAAAA,QAAAA,EAAAA,UAGCR,CAAAA,EAAAA;MAAAA,KACH,IAAIK,CAAAA,GAAI,CAAA,EAAGA,CAAAA,GAAIG,IAAAA,CAAKF,UAAAA,CAAWV,MAAAA,EAAQS,CAAAA,EAAAA,EAAK;QAAA,IAChCG,IAAAA,CAAKF,UAAAA,CAAWD,CAAAA,CAAAA,CACpBL,QAAAA,KAAaA,CAAAA,EAAU,OAAOK,CAAAA;MAAAA;MAAAA,OAAAA,CAGnC,CAAA;IAAA,CAAA;IAAA,MAAA,EAAA,UAGFL,CAAAA,EAAAA;MAAAA,IAAAA,EACQQ,IAAAA,CAAKE,QAAAA,CAASV,CAAAA,CAAAA,GAChB,CAAA,CAAA,EAAA,OAAA,IAAA,CAEPW,SAAAA,CAAUX,CAAAA,CAAAA,EACgB,CAAA,KAA3BQ,IAAAA,CAAKF,UAAAA,CAAWV,MAAAA,IAAcY,IAAAA,CAAKI,IAAAA,EAAAA,EAEhCJ,IAAAA;IAAAA,CAAAA;IAAAA,SAAAA,EAAAA,UAGER,CAAAA,EAAAA;MAAAA,IACHa,CAAAA,GAAQL,IAAAA,CAAKE,QAAAA,CAASV,CAAAA,CAAAA;QACtBE,CAAAA,GAAUM,IAAAA,CAAKF,UAAAA,CAAWO,CAAAA,CAAAA;MAAAA,KAC3B,IAAIC,CAAAA,IAAOZ,CAAAA,EAAAA,OAAgBA,CAAAA,CAAQY,CAAAA,CAAAA;MAExCN,IAAAA,CAAKF,UAAAA,CAAWS,MAAAA,CAAOF,CAAAA,EAAO,CAAA,CAAA;IAAA,CAAA;IAAA,KAAA,EAAA,YAAA;MAAA,IAIX,OAAA,KAAfL,IAAAA,CAAKQ,KAAAA,EAAAA,OAAAA,IAAAA,CAEJA,KAAAA,GAAQ,OAAA,EAAA,IAAA,CACRC,IAAAA,EAAAA,EACET,IAAAA;IAAAA,CAAAA;IAAAA,IAAAA,EAAAA,YAAAA;MAAAA,IAIY,MAAA,KAAfA,IAAAA,CAAKQ,KAAAA,EAAAA,OAAAA,IAAAA,CAEJA,KAAAA,GAAQ,MAAA,EAAA,oBAAA,CACQR,IAAAA,CAAKU,KAAAA,CAAAA,EACnBV,IAAAA;IAAAA,CAAAA;IAAAA,IAAAA,EAAAA,YAAAA;MAAAA,IAAAA,CAAAA,GAAAA,IAAAA;MAAAA,IAAAA,CAIFU,KAAAA,GAAQpB,qBAAAA,CAAsB,YAAA;QAAA,CAAA,CAAamB,IAAAA,EAAAA;MAAAA,CAAAA,CAAAA;MAAAA,KAE3C,IAAIZ,CAAAA,GAAI,CAAA,EAAGA,CAAAA,GAAIG,IAAAA,CAAKF,UAAAA,CAAWV,MAAAA,EAAQS,CAAAA,EAAAA,EAAK;QAAA,IAC1CH,CAAAA,GAAUM,IAAAA,CAAKF,UAAAA,CAAWD,CAAAA,CAAAA;UAC1BL,CAAAA,GAAWE,CAAAA,CAAQF,QAAAA;UACnBI,CAAAA,GAAQF,CAAAA,CAAQE,KAAAA;QAAAA,CAAAA,CAEdC,CAAAA,EAAAA,EACJH,CAAAA,CAAQG,CAAAA,IAAKH,CAAAA,CAAQC,CAAAA,KAAAA,CAAAA,CACfC,CAAAA,CAAAA,EAAAA,CAAAA,CACDC,CAAAA,GAAI,CAAA,CAAA;MAAA;IAAA;EAAA,CAAA;AAAA,CAAA,CAAA","sourcesContent":["/**\n *  RAFManager requestAnimationFrame Manager\n * \n *  Simple package\n * \n *  CODE:\n * \n * \t\t// Add to\n *  \t-- RAFManager.add(func);\n * \n *   \t// Add and carry parameters\n *  \t-- const func = data =>{ console.log(data) };\n *  \t-- RAFManager.add(func, 25, { msg:'hello world!' }); \n * \t\t\n * \t\t// remove\n *  \t-- RAFManager.remove(func);\n *  \t-- RAFManager.stop();\t\n*/\n\n// simple polyfill by https://gist.github.com/paulirish/1579671\n(function () {\n\tlet lastTime = 0;\n\tlet vendors = ['ms', 'moz', 'webkit', 'o'];\n\tfor (let x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n\t\twindow.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n\t\twindow.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame']\n\t\t\t|| window[vendors[x] + 'CancelRequestAnimationFrame'];\n\t}\n}());\n\nconst RAFManager = {\n\ttimer: 0,\n\tstate: 'stop',\n\tanimations: [],\n\n\tadd(callback, fps = 60, param = null) {\n\t\tconst n = 60 / fps;\n\t\tconst aniData = { callback, fps, n, param, i: 0 };\n\t\tthis.animations.push(aniData);\n\t\tif (this.animations.length >= 1) this.start();\n\n\t\treturn this;\n\t},\n\n\tgetIndex(callback) {\n\t\tfor (let i = 0; i < this.animations.length; i++) {\n\t\t\tconst aniData = this.animations[i];\n\t\t\tif (aniData.callback === callback) return i;\n\t\t}\n\n\t\treturn -1;\n\t},\n\n\tremove(callback) {\n\t\tconst index = this.getIndex(callback);\n\t\tif (index < 0) return;\n\n\t\tthis.deleteMap(callback);\n\t\tif (this.animations.length === 0) this.stop();\n\n\t\treturn this;\n\t},\n\n\tdeleteMap(callback) {\n\t\tconst index = this.getIndex(callback);\n\t\tconst aniData = this.animations[index];\n\t\tfor (let key in aniData) delete aniData[key];\n\n\t\tthis.animations.splice(index, 1);\n\t},\n\n\tstart() {\n\t\tif (this.state === 'start') return;\n\n\t\tthis.state = 'start';\n\t\tthis.tick();\n\t\treturn this;\n\t},\n\n\tstop() {\n\t\tif (this.state === 'stop') return;\n\n\t\tthis.state = 'stop';\n\t\tcancelAnimationFrame(this.timer);\n\t\treturn this;\n\t},\n\n\ttick() {\n\t\tthis.timer = requestAnimationFrame(() => { this.tick(); });\n\n\t\tfor (let i = 0; i < this.animations.length; i++) {\n\t\t\tconst aniData = this.animations[i];\n\t\t\tconst callback = aniData.callback;\n\t\t\tconst param = aniData.param;\n\n\t\t\taniData.i++;\n\t\t\tif (aniData.i >= aniData.n) {\n\t\t\t\tcallback(param);\n\t\t\t\taniData.i = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default RAFManager;"]},"metadata":{},"sourceType":"script"}